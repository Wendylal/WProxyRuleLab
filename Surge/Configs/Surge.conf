[General]
# æ—¥å¿—ç­‰çº§ï¼šnotify é€‚åˆæ—¥å¸¸ä½¿ç”¨ï¼ˆä¸è¿‡åº¦åˆ·å±ï¼‰
loglevel = notify
show-error-page-for-reject = true

# UDP ä¼˜å…ˆï¼ˆæå‡éƒ¨åˆ†æµåª’ä½“/é€šè¯ä½“éªŒï¼‰
udp-priority = true
udp-policy-not-supported-behaviour = REJECT

# ä»…ä½¿ç”¨ IPv4ï¼ˆå‡å°‘éƒ¨åˆ†ç½‘ç»œç¯å¢ƒä¸‹çš„ IPv6 å¹²æ‰°ï¼‰
ipv6 = false
ipv6-vif = disabled
all-hybrid = false

# å…³é—­å±€åŸŸç½‘ä»£ç†è®¿é—®ï¼ˆæ›´å®‰å…¨ï¼›å¦‚éœ€å±€åŸŸç½‘ç®¡ç†å¯æ”¹ä¸º trueï¼‰
wifi-assist = false
allow-wifi-access = false
allow-hotspot-access = false

# Web æ§åˆ¶é¢æ¿ï¼ˆä»…æœ¬æœºï¼‰
http-api-web-dashboard = true
http-api-tls = false

# DNSï¼šæ˜æ–‡ DNS + DoH
dns-server = 223.5.5.5, 119.29.29.29, 1.1.1.1, 8.8.8.8
hijack-dns = *:53
encrypted-dns-server = https://dns.alidns.com/dns-query, https://doh.pub/dns-query

# ç³»ç»Ÿ hosts / ç®€å•ä¸»æœºåå¤„ç†
read-etc-hosts = true
exclude-simple-hostnames = true

# å¸¸è§å±€åŸŸç½‘å’Œä¿ç•™åœ°å€ä¸èµ°ä»£ç†
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 169.254.0.0/16, 127.0.0.1, localhost, *.local

# è¿é€šæ€§æµ‹è¯•ï¼ˆç”¨äºç›´è¿/ä»£ç†çŠ¶æ€åˆ¤æ–­ï¼‰
test-timeout = 5
# ç›´è¿æµ‹è¯• URL
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
# ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://1.1.1.1/generate_204
# å¯æ›¿æ¢å ä½ï¼ˆæŒ‰éœ€ï¼‰
# internet-test-url = __INTERNET_TEST_URL__
# proxy-test-url = __PROXY_TEST_URL__

# è¿™äº›åŸŸå/åœ°å€ä¼˜å…ˆè¿”å›çœŸå® IPï¼ˆé¿å…ä»£ç†/è§£æå¼‚å¸¸ï¼‰
always-real-ip = *.lan, *.direct, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, opencloud.wostore.cn, auth.wosms.cn, *.10099.com.cn, *.apple.com, *.icloud.com
# Telegram å¸¸è§ç½‘æ®µèµ°åŸå§‹ TCP ä¸»æœºå¤„ç†ï¼ˆæå‡å…¼å®¹æ€§ï¼‰
always-raw-tcp-hosts = 149.154.*, 91.108.*

# GeoIP æ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb


[Proxy Group]
# =========================
# è®¢é˜…å¯¼å…¥ï¼ˆå¿…é¡»æ›¿æ¢å ä½ç¬¦ï¼‰
# =========================
# ä¸»è®¢é˜…ï¼ˆå¿…å¡«ï¼‰
MainSub = select, policy-path=__SURGE_MAIN_SUB_URL__, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
# å¤‡ç”¨è®¢é˜…ï¼ˆå¯é€‰ï¼›ä¸ç”¨å¯åˆ æ‰æœ¬è¡Œï¼Œå¹¶åˆ æ‰ä¸‹æ–¹å¼•ç”¨ SpareSub çš„åœ°æ–¹ï¼‰
SpareSub = select, policy-path=__SURGE_SPARE_SUB_URL__, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0

# =========================
# æ€»å‡ºå£ / å…œåº•
# =========================
# Proxyï¼šé€šç”¨ä»£ç†å…¥å£ï¼ˆå¯åœ¨è§„åˆ™æˆ–æ‰‹åŠ¨åˆ‡æ¢æ—¶ä½¿ç”¨ï¼‰
Proxy = select, HK, TW, JP, US, SG, Final, SpareSub, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
# Finalï¼šæœ€ç»ˆå…œåº•ç­–ç•¥ï¼ˆæ‰€æœ‰æœªå‘½ä¸­è§„åˆ™æµé‡ä¼šèµ°è¿™é‡Œï¼‰
Final = select, HK, TW, JP, US, SG, Auto, MainSub, SpareSub, DIRECT, no-alert=0, hidden=0, include-all-proxies=0

# =========================
# å¸¸ç”¨ä¸šåŠ¡ç»„ï¼ˆæŒ‰éœ€åˆ‡æ¢åœ°åŒºï¼‰
# =========================
Telegram = select, HK, TW, JP, US, SG, Final, no-alert=0, hidden=0, include-all-proxies=0
X = select, HK, TW, JP, US, SG, Final, no-alert=0, hidden=0, include-all-proxies=0
YouTube = select, HK, TW, JP, US, SG, Final, no-alert=0, hidden=0, include-all-proxies=0
Instagram = select, HK, TW, JP, US, SG, Final, no-alert=0, hidden=0, include-all-proxies=0
TikTok = select, HK, TW, JP, US, SG, Final, no-alert=0, hidden=0, include-all-proxies=0
# Chinaï¼šç”¨äºâ€œå›½å†…åº”ç”¨ä½†éœ€æŒ‰åœ°åŒºåˆ‡æ¢â€çš„åœºæ™¯ï¼ˆé»˜è®¤ä¹Ÿå¯ç›´è¿ï¼‰
China = select, HK, TW, JP, US, SG, Final, MainSub, DIRECT, no-alert=0, hidden=0, include-all-proxies=0

# =========================
# åœ°åŒºå…¥å£ï¼ˆæ‰‹åŠ¨ï¼‰
# =========================
# è¿™ 5 ä¸ªç»„ä¼šä»ä¸»è®¢é˜…ç­›é€‰å‡ºçš„åœ°åŒºèŠ‚ç‚¹ä¸­ä¾›æ‰‹åŠ¨é€‰æ‹©
HK = select, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=HK_Filter
TW = select, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=TW_Filter
JP = select, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=JP_Filter
US = select, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=US_Filter
SG = select, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=SG_Filter

# =========================
# åœ°åŒºæµ‹é€Ÿå…¥å£ï¼ˆè‡ªåŠ¨é€‰å»¶è¿Ÿè¾ƒä½èŠ‚ç‚¹ï¼‰
# =========================
HKG = url-test, HK_Filter, interval=600, tolerance=80, no-alert=1, hidden=1
TWN = url-test, TW_Filter, interval=600, tolerance=80, no-alert=1, hidden=1
JPN = url-test, JP_Filter, interval=600, tolerance=80, no-alert=1, hidden=1
USA = url-test, US_Filter, interval=600, tolerance=80, no-alert=1, hidden=1
SGP = url-test, SG_Filter, interval=600, tolerance=80, no-alert=1, hidden=1

# Autoï¼šç»¼åˆè‡ªåŠ¨å‡ºå£ï¼ˆç»™ Final ä½¿ç”¨ï¼‰
Auto = fallback, HKG, TWN, JPN, USA, SGP, interval=600, tolerance=80, no-alert=1, hidden=1, include-all-proxies=0

# =========================
# åœ°åŒºç­›é€‰ï¼ˆä» MainSub ä¸­æŒ‰åç§°æ­£åˆ™æå–ï¼‰
# å¦‚ä½ çš„èŠ‚ç‚¹å‘½åé£æ ¼ä¸åŒï¼Œå¯ä¿®æ”¹ policy-regex-filter
# =========================
HK_Filter = smart, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=MainSub, policy-regex-filter=é¦™æ¸¯|ğŸ‡­ğŸ‡°|[Hh]ong\s*[Kk]ong|HongKong|HKG|(?:^|[^A-Za-z])HK(?:G)?(?:[^A-Za-z]|$)
TW_Filter = smart, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=MainSub, policy-regex-filter=å°æ¹¾|å°ç£|ğŸ‡¹ğŸ‡¼|Taiwan|Taipei|(?:^|[^A-Za-z])TW(?:N)?(?:[^A-Za-z]|$)
JP_Filter = smart, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=MainSub, policy-regex-filter=æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|Japan|Tokyo|Osaka|(?:^|[^A-Za-z])JP(?:N)?(?:[^A-Za-z]|$)
US_Filter = smart, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=MainSub, policy-regex-filter=ç¾å›½|ç¾åœ‹|ğŸ‡ºğŸ‡¸|United\s*States|America|(?:^|[^A-Za-z])US(?:A)?(?:[^A-Za-z]|$)
SG_Filter = smart, update-interval=0, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=MainSub, policy-regex-filter=æ–°åŠ å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore|(?:^|[^A-Za-z])SG(?:P)?(?:[^A-Za-z]|$)


[Rule]
# =========================
# 0) å¹¿å‘Š / è·Ÿè¸ªï¼ˆå»ºè®®æ”¾æœ€å‰ï¼‰
# =========================
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,pre-matching
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT,extended-matching
RULE-SET,https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Tracking.list,REJECT,extended-matching

# =========================
# 1) æœ¬åœ°è¦†ç›–ï¼ˆç¤ºä¾‹ï¼‰
# è‡ªå®šä¹‰å¼ºåˆ¶åˆ†æµè§„åˆ™å»ºè®®æ”¾è¿™é‡Œ
# =========================
DOMAIN-SUFFIX,vercel.app,Proxy

# =========================
# 2) å›½å†…ç›´è¿ / è§£å°ï¼ˆå°½é‡æ”¾åœ¨ App åˆ†æµå‰ï¼‰
# =========================
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,DIRECT
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,DIRECT
RULE-SET,https://raw.githubusercontent.com/Repcz/Tool/X/Surge/Rules/Apple.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/DouYin/DouYin.list,China

# =========================
# 3) å¸¸ç”¨ App åˆ†æµ
# æ³¨æ„ï¼šYouTube æ”¾å‰é¢ï¼Œé¿å…è¢«å…¶ä»–è§„åˆ™æå‰å‘½ä¸­
# =========================
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,YouTube,extended-matching
RULE-SET,https://raw.githubusercontent.com/Repcz/Tool/refs/heads/X/Surge/Rules/Telegram_NoIP.list,Telegram
RULE-SET,https://raw.githubusercontent.com/Repcz/Tool/refs/heads/X/Surge/Rules/Telegram.list,Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list,X,extended-matching
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Instagram/Instagram.list,Instagram,extended-matching
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Threads/Threads.list,Instagram,extended-matching
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list,TikTok,extended-matching

# =========================
# 4) CDNï¼ˆå»ºè®®æ”¾åœ¨ App è§„åˆ™ä¹‹åï¼‰
# =========================
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,Final,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/cdn.conf,Final

# =========================
# 5) å±€åŸŸç½‘
# =========================
RULE-SET,https://raw.githubusercontent.com/Repcz/Tool/X/Surge/Rules/Lan.list,DIRECT

# =========================
# 6) å…œåº•
# =========================
GEOIP,CN,DIRECT,no-resolve
FINAL,Final,dns-failed


[Host]
# å¯é€‰ï¼šApple ä¸‹è½½åŸŸåé‡å†™ï¼ˆæŒ‰éœ€å¯ç”¨ï¼‰
# iosapps.itunes.apple.com = iosapps.itunes.apple.com.download.ks-cdn.com


[Header Rewrite]
# GitHub Raw / Gist è¯·æ±‚å¤´è¯­è¨€æ”¹å†™ï¼ˆæå‡éƒ¨åˆ†èµ„æºè¿”å›ç¨³å®šæ€§ï¼‰
http-request (raw|gist).githubusercontent.com header-replace Accept-Language en-us


[MITM]
# å¦‚éœ€å¯ç”¨ MITMï¼Œè¯·å¡«å†™ä½ è‡ªå·±çš„è¯ä¹¦ä¸ hostname
# âš ï¸ ä¸è¦å…¬å¼€ä½ çš„è¯ä¹¦å†…å®¹
# ca-p12 = __YOUR_CA_P12__
# ca-passphrase = __YOUR_CA_PASSPHRASE__
# hostname = %APPEND% example.com
